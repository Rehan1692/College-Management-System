<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logout Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <div class="card">
                    <div class="card-header">
                        <h3>Logout Test</h3>
                    </div>
                    <div class="card-body">
                        <p>This page is for testing the logout functionality.</p>
                        <div class="mb-3">
                            <button id="testLogoutBtn" class="btn btn-primary">Test Logout</button>
                        </div>
                        <div class="mb-3">
                            <button id="directLogoutBtn" class="btn btn-danger">Direct Logout</button>
                        </div>
                        <div class="mb-3">
                            <button id="clearStorageBtn" class="btn btn-warning">Clear localStorage Only</button>
                        </div>
                        <div class="mb-3">
                            <button id="redirectOnlyBtn" class="btn btn-info">Redirect Only</button>
                        </div>
                        <div class="alert alert-info mt-3">
                            <p>Check the browser console for logs.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/logout-test.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Test logout button
            document.getElementById('testLogoutBtn').addEventListener('click', function() {
                console.log('Test logout button clicked');
                testLogout();
            });
            
            // Direct logout button
            document.getElementById('directLogoutBtn').addEventListener('click', function() {
                console.log('Direct logout button clicked');
                try {
                    localStorage.removeItem('accessToken');
                    localStorage.removeItem('userType');
                    localStorage.removeItem('userData');
                    window.location.href = 'login.html';
                } catch (error) {
                    console.error('Error during direct logout:', error);
                    alert('Error during direct logout: ' + error.message);
                }
            });
            
            // Clear localStorage only button
            document.getElementById('clearStorageBtn').addEventListener('click', function() {
                console.log('Clear localStorage button clicked');
                try {
                    localStorage.removeItem('accessToken');
                    localStorage.removeItem('userType');
                    localStorage.removeItem('userData');
                    localStorage.removeItem('mockCourses');
                    localStorage.removeItem('mockStudents');
                    localStorage.removeItem('mockAssignments');
                    localStorage.removeItem('mockNotices');
                    localStorage.removeItem('mockAttendance');
                    alert('localStorage cleared successfully');
                } catch (error) {
                    console.error('Error clearing localStorage:', error);
                    alert('Error clearing localStorage: ' + error.message);
                }
            });
            
            // Redirect only button
            document.getElementById('redirectOnlyBtn').addEventListener('click', function() {
                console.log('Redirect only button clicked');
                try {
                    window.location.href = 'login.html';
                } catch (error) {
                    console.error('Error during redirect:', error);
                    alert('Error during redirect: ' + error.message);
                }
            });
        });
    </script>
</body>
</html> 